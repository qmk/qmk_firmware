#include QMK_KEYBOARD_H
#ifdef SSD1306OLED
  #include "ssd1306.h"
#endif
#include "keymap_jp.h"
#include "action_layer.h"

#ifdef PROTOCOL_LUFA
  #include "lufa.h"
  #include "split_util.h"
#endif

extern keymap_config_t keymap_config;

#ifdef RGBLIGHT_ENABLE
//Following line allows macro to read current RGB settings
extern rgblight_config_t rgblight_config;
#endif

extern uint8_t is_master;


// Layer
enum layer_number {
    _NUM = 0,		//Default Layer For NUM
	_CMD,			//Layer For CMD
    _SLCT,           //Layer For Select
    _ABC            //Layer For alfabet

};

enum tapdances{
  TD_KCPAB = 0,
  TD_KCANM,
};

qk_tap_dance_action_t tap_dance_actions[] = {
  [TD_KCPAB] = ACTION_TAP_DANCE_DUAL_ROLE(KC_P, _ABC),
  [TD_KCANM] = ACTION_TAP_DANCE_DUAL_ROLE(KC_A, _NUM),
};

//Sample Macro for KC
enum macro_keycodes {
  KC_SAMPLEMACRO,
};

//Special KeyCode
enum custom_keycodes {
  NUM = SAFE_RANGE,	//Change Layer for NUM
  CMD,				//Change Layer for Command
  SLCT,             //Change Layer for Select
  ABC               //Change Layer for Alfabet
};

//Alias
#define MT_SE LT(_SLCT,KC_ESC)     //hold:"SLCT"   tap:"ESC"
#define MT_CE LT(_CMD,KC_ENTER)     //hold:"CMD"    tap:"ENTER"



//Keymap
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_NUM] = LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
        _______, _______, _______, _______, _______, _______, _______,   TD(TD_KCPAB),  KC_TAB,   KC_F8,  KC_DEL,S(KC_MINS),S(KC_8),KC_BSPC,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,        KC_X,    KC_7,    KC_8,    KC_9, KC_SLSH, S(KC_9),   KC_UP,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     C(KC_Y),    KC_4,    KC_5,    KC_6, KC_PAST, KC_LEFT,KC_RIGHT,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     C(KC_Z),    KC_1,    KC_2,    KC_3, KC_MINS, KC_LCTL, KC_DOWN,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
      _______, _______, _______, _______, _______, _______, _______,         MT_SE,    KC_0,   KC_F5,  KC_DOT, KC_PPLS, KC_LSFT,   MT_CE
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
      ),

  [_CMD] =  LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
        _______, _______, _______, _______, _______, _______, _______,   C(KC_TAB), A(KC_Q), A(KC_G), S(KC_W),S(KC_INT1),A(KC_C),C(KC_S),
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,    S(KC_F),C(S(KC_END)),S(KC_X),S(KC_C),S(KC_A), S(KC_P), S(KC_D),
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     A(KC_M), A(KC_O),    KC_R,    KC_E,    KC_M,    KC_H,    KC_X,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     A(KC_K), A(KC_S), A(KC_A), A(KC_E), A(KC_P), A(KC_D), A(KC_R),
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,    C(KC_W),C(S(KC_I)),C(KC_B),C(S(KC_K)),C(KC_F2),C(KC_F),_______
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
      ),

  [_SLCT] = LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
        _______, _______, _______, _______, _______, _______, _______,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,        KC_C,    KC_F,    KC_G,    KC_E, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     _______, C(KC_X), C(KC_C), C(KC_V), _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,     _______, C(KC_A), KC_MHEN, KC_HENK, _______, _______, _______
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
  ),


  [_ABC] = LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
        _______, _______, _______, _______, _______, _______, _______,   TD(TD_KCANM), KC_B,    KC_C,    KC_D,    KC_E, S(KC_8), KC_BSPC,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,        KC_F,    KC_G,    KC_H,    KC_I,    KC_J, S(KC_9),   KC_UP,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,        KC_K,    KC_L,    KC_M,    KC_N,    KC_O, KC_LEFT,KC_RIGHT,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,        KC_P,    KC_Q,    KC_R,    KC_S,    KC_T,    KC_U, KC_DOWN,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, _______, _______, _______, _______, _______, _______,        KC_V,    KC_W,    KC_X,    KC_Y,    KC_Z, KC_LSFT,  KC_ENT
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
  )

};
