# Keybit8 QMK Firmware

QMKファームウェア for Keybit8 - レイヤー機能付きキーボード（マインクラフト用）

## 仕様

- **キーマトリクス**: 2行×4列（合計8キー）
- **レイヤー数**: 4レイヤー
  - レイヤー0（ベース）: 基本操作
  - レイヤー1: ホットバー2-9（キー7長押しでアクティブ）
  - レイヤー2: その他の操作（キー6長押しでアクティブ）
  - レイヤー3: ゲーム用レイヤー（キー3長押しでアクティブ）

## キーマッピング

### レイヤー0（ベース）
```
┌───┬───┬───┬───┐
│ W │ A │ S │LT3│
├───┼───┼───┼───┤
│Spc│Shf│LT2│LT1│
└───┴───┴───┴───┘
```
- **LT3**: 長押しでレイヤー3、タップでD
- **LT2**: 長押しでレイヤー2、タップでE
- **LT1**: 長押しでレイヤー1、タップで1

### レイヤー1（キー7長押し）
```
┌───┬───┬───┬───┐
│ 2 │ 3 │ 4 │ 5 │
├───┼───┼───┼───┤
│ 6 │ 7 │ 8 │ 9 │
└───┴───┴───┴───┘
```
ホットバー2-9

### レイヤー2（キー6長押し）
```
┌───┬───┬───┬───┐
│ Q │ R │ F │Tab│
├───┼───┼───┼───┤
│Ent│Esc│ T │ C │
└───┴───┴───┴───┘
```
その他の操作

### レイヤー3（キー3長押し）
```
┌───┬───┬───┬───┐
│←  │↑  │↓  │→  │
├───┼───┼───┼───┤
│ 0 │ 1 │ 2 │Spc│
└───┴───┴───┴───┘
```
ゲーム用レイヤー（方向キーと数字）

## LED表示

緑LEDの動作で現在のレイヤーを確認できます：

- **レイヤー0（BASE）**: 緑LED OFF
- **レイヤー1**: 緑LED 常時 ON
- **レイヤー2**: 緑LED ゆっくり点滅（500ms周期）
- **レイヤー3**: 緑LED 常時 ON

## ビルド方法

詳細な手順は `BUILD_INSTRUCTIONS.md` を参照してください。

### クイックスタート

1. **QMK環境をセットアップ**（まだの場合）
   ```bash
   qmk setup
   ```

2. **キーボードファイルを配置**
   ```bash
   cp -r qmk_keybit8 ~/qmk_firmware/keyboards/
   ```

3. **ファームウェアをビルド**
   ```bash
   cd ~/qmk_firmware
   qmk compile -kb keybit8 -km default
   ```

4. **Arduino Pro Microをブートローダーモードに入る**
   - RESETボタンを2回素早く押す

5. **ファームウェアを書き込み**
   ```bash
   qmk flash -kb keybit8 -km default
   ```

詳細は `BUILD_INSTRUCTIONS.md` を参照してください。

## 機能

### LED制御
- **赤LED（8個）**: Webゲーム連携用（Web Serial API経由で制御）
- **緑LED（1個）**: レイヤー状態表示用

### スピーカー制御
- Webゲーム連携用（Web Serial API経由で制御）
- 周波数と継続時間を指定可能

### Webゲーム連携
Web Serial APIを使用して、WebゲームからLEDとスピーカーを制御できます。
詳細は実装コードを参照してください。

## 注意事項

- このファームウェアは基本的なキーマップとレイヤー機能を実装しています
- LED制御やスピーカー機能は、Web Serial API経由で制御されます
- ピンアサインはArduino Pro Micro用に設定されています
- VIA/Remap対応のため、EEPROMにキーマップが保存されます

## Remap対応

このファームウェアはRemap（VIA）に対応しています。

### Remapでの使用方法

1. ファームウェアをビルドして書き込み
   ```bash
   qmk compile -kb keybit8 -km default
   qmk flash -kb keybit8 -km default
   ```

2. [Remap](https://remap-keys.app/)にアクセス

3. 「+ KEYBOARD」をクリック

4. キーボードを接続し、Remapが認識するまで待機

5. GUIでキーマッピングを変更可能

### Remapでの設定

- **レイヤー0（BASE）**: 基本操作
- **レイヤー1**: ホットバー2-9（キー7長押しでアクティブ）
- **レイヤー2**: その他の操作（キー6長押しでアクティブ）
- **レイヤー3**: ゲーム用レイヤー（キー3長押しでアクティブ）

Remapでは、各レイヤーのキーマッピングを視覚的に編集できます。

**Layer Tapの設定方法**:
1. キーを選択
2. 「Layer Tap」を選択
3. レイヤー番号を選択（例: Layer 3）
4. タップ時のキーを選択（例: D）

これで、タップでキー入力、長押しでレイヤー切り替えが可能になります。

## カスタマイズ

`keymaps/default/keymap.c`を編集してキーマッピングを変更できます。
Remapを使用する場合は、GUIで変更することも可能です。

