# Keybit8 Game

Keybit8キーボード用のWebゲームです。LEDとスピーカーを使用したインタラクティブなゲームを楽しめます。

## 機能

- **リズムゲーム**: LEDが点灯する順序に合わせてキーを押すゲーム
- **タイピングゲーム**: 表示されたキーを素早く押すゲーム
- **メモリーゲーム**: LEDの点灯順序を覚えて再現するゲーム

## 必要なもの

- Keybit8キーボード
- Chrome、Edge、OperaなどのChromiumベースのブラウザ（Web Serial API対応）
- USBケーブル

## 使い方

1. **ゲームを開く**
   - `index.html`をブラウザで開きます
   - ローカルサーバーを使用することを推奨します（`python3 -m http.server`など）

2. **キーボードに接続**
   - 「キーボードに接続」ボタンをクリック
   - 表示されるデバイス選択画面でKeybit8を選択
   - 接続が成功すると、ステータスが「接続済み」に変わります

3. **ゲームを開始**
   - ゲームモードを選択（リズムゲーム、タイピングゲーム、メモリーゲーム）
   - 難易度を選択（簡単、普通、難しい）
   - 「ゲーム開始」ボタンをクリック

4. **ゲームをプレイ**
   - キーボードのキーを押してゲームを操作
   - LEDが点灯して視覚的なフィードバックを提供
   - スピーカーから音が鳴ります

## LEDとスピーカーのピン設定

- **赤LED**: 8個（ピン1, 8, 16, 15, 0, 9, 14, 18）
- **緑LED**: 1個（ピン19）
- **スピーカー**: ピン10

## コマンド形式

Webゲームからキーボードに送信されるコマンド形式：

- **LED制御**: `LED:{pin}:{state}:{brightness}`
  - 例: `LED:1:1:128` (ピン1のLEDを点灯、明るさ128)
  
- **スピーカー制御**: `TONE:{pin}:{frequency}:{duration}:{volume}`
  - 例: `TONE:10:440:500:128` (ピン10で440Hzの音を500ms再生、音量128)

## QMKファームウェア側の実装

Webゲームから送信されるコマンドを受け取るには、QMKファームウェア側でシリアル通信を処理するコードを追加する必要があります。

### 実装例

`keymaps/default/keymap.c`に以下のようなコードを追加：

```c
#include "quantum.h"

void serial_communication_task(void) {
    // シリアル通信を処理
    // LEDとスピーカーを制御
}
```

## トラブルシューティング

### 接続できない
- ブラウザがWeb Serial APIをサポートしているか確認
- キーボードが正しく接続されているか確認
- 他のアプリケーションがシリアルポートを使用していないか確認

### LEDが点灯しない
- QMKファームウェア側でLED制御コードが実装されているか確認
- ピン番号が正しいか確認

### 音が鳴らない
- QMKファームウェア側でスピーカー制御コードが実装されているか確認
- ピン番号が正しいか確認
- スピーカーが正しく接続されているか確認

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

